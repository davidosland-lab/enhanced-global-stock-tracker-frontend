╔═══════════════════════════════════════════════════════════════════════════════╗
║                   OVERNIGHT STOCK SCREENING SYSTEM - PHASE 2                  ║
║                              Architecture Diagram                             ║
╚═══════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────────────────────────────────────────────────────────┐
│                            CONFIGURATION LAYER                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌──────────────────────────────┐    ┌──────────────────────────────┐     │
│  │   asx_sectors.json           │    │   screening_config.json      │     │
│  ├──────────────────────────────┤    ├──────────────────────────────┤     │
│  │ • 8 sectors × 30 stocks      │    │ • Schedule (22:00-07:00)     │     │
│  │ • Market cap criteria        │    │ • Ensemble weights           │     │
│  │ • Volume criteria            │    │ • Scoring factors            │     │
│  │ • Beta ranges (0.5-2.5)      │    │ • Parallel workers (4)       │     │
│  │ • Sector weights (0.9-1.4)   │    │ • SPI monitoring config      │     │
│  └──────────────────────────────┘    └──────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            CORE SCREENING MODULES                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║  MODULE 1: STOCK SCANNER (16KB, 450+ lines)                          ║ │
│  ╠═══════════════════════════════════════════════════════════════════════╣ │
│  ║                                                                       ║ │
│  ║  INPUT: ASX stock symbols (240 stocks)                               ║ │
│  ║                                                                       ║ │
│  ║  VALIDATION:                                                          ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ ✓ Market cap > $500M                                   │          ║ │
│  ║  │ ✓ Avg volume > 500k                                    │          ║ │
│  ║  │ ✓ Price: $0.50 - $500                                  │          ║ │
│  ║  │ ✓ Beta: 0.5 - 2.5                                      │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  TECHNICAL ANALYSIS:                                                  ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ • RSI (14-period)                                      │          ║ │
│  ║  │ • MA20 & MA50                                          │          ║ │
│  ║  │ • Volatility (std dev)                                 │          ║ │
│  ║  │ • Price vs MA ratios                                   │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  SCREENING SCORE (0-100):                                             ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ Liquidity (0-20)    ████████████████                   │          ║ │
│  ║  │ Market Cap (0-20)   ████████████████                   │          ║ │
│  ║  │ Volatility (0-15)   ███████████                        │          ║ │
│  ║  │ Momentum (0-15)     ███████████                        │          ║ │
│  ║  │ Technical (0-15)    ███████████                        │          ║ │
│  ║  │ Sector Weight (0-15)███████████                        │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  OUTPUT: Validated stocks with technical indicators + scores         ║ │
│  ║                                                                       ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                                                             │
│                                      │                                      │
│                                      ▼                                      │
│                                                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║  MODULE 2: SPI MONITOR (17KB, 500+ lines)                            ║ │
│  ╠═══════════════════════════════════════════════════════════════════════╣ │
│  ║                                                                       ║ │
│  ║  MARKET DATA SOURCES:                                                 ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ 📊 ASX 200 (^AXJO)        Last close, 5-day trend      │          ║ │
│  ║  │ 🇺🇸 S&P 500 (^GSPC)       Weighted 50%                  │          ║ │
│  ║  │ 🇺🇸 Nasdaq (^IXIC)        Weighted 30%                  │          ║ │
│  ║  │ 🇺🇸 Dow Jones (^DJI)      Weighted 20%                  │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  GAP PREDICTION:                                                      ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ US Markets Change → Weighted Average                   │          ║ │
│  ║  │     ↓                                                  │          ║ │
│  ║  │ Apply Correlation Factor (0.65)                        │          ║ │
│  ║  │     ↓                                                  │          ║ │
│  ║  │ Predicted ASX Gap (±%)                                 │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  SENTIMENT SCORE (0-100):                                             ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ US Performance (40%)   ███████████████████              │          ║ │
│  ║  │ Gap Magnitude (30%)    ██████████████                   │          ║ │
│  ║  │ US Agreement (20%)     █████████                        │          ║ │
│  ║  │ Confidence (10%)       ████                             │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  RECOMMENDATION:                                                      ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ STRONG_BUY (≥70, conf≥70) │ STRONG_SELL (≤30, conf≥70) │          ║ │
│  ║  │ BUY (≥60)                  │ SELL (≤40)                 │          ║ │
│  ║  │ HOLD (40-60)               │ NEUTRAL (45-55)            │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  OUTPUT: Market sentiment + gap prediction + recommendation          ║ │
│  ║                                                                       ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                                                             │
│                          ┌──────────────┐                                   │
│                          │ Stocks Data  │                                   │
│                          └──────┬───────┘                                   │
│                                 │                                           │
│                          ┌──────▼───────┐                                   │
│                          │SPI Sentiment │                                   │
│                          └──────┬───────┘                                   │
│                                 │                                           │
│                                 ▼                                           │
│                                                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║  MODULE 3: BATCH PREDICTOR (19KB, 550+ lines)                        ║ │
│  ╠═══════════════════════════════════════════════════════════════════════╣ │
│  ║                                                                       ║ │
│  ║  PARALLEL PROCESSING:                                                 ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ Worker 1 ──┐                                           │          ║ │
│  ║  │ Worker 2 ──┤ ThreadPoolExecutor (4 workers)            │          ║ │
│  ║  │ Worker 3 ──┤                                           │          ║ │
│  ║  │ Worker 4 ──┘                                           │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  ENSEMBLE PREDICTION:                                                 ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │                                                        │          ║ │
│  ║  │  ┌─────────────┐                                      │          ║ │
│  ║  │  │ LSTM (45%)  │ Neural network prediction            │          ║ │
│  ║  │  │             │ (Fallback: trend-based)              │          ║ │
│  ║  │  └──────┬──────┘                                      │          ║ │
│  ║  │         │                                             │          ║ │
│  ║  │  ┌──────▼──────┐                                      │          ║ │
│  ║  │  │ Trend (25%) │ MA20/MA50, momentum                  │          ║ │
│  ║  │  │             │ Golden/death cross                   │          ║ │
│  ║  │  └──────┬──────┘                                      │          ║ │
│  ║  │         │                                             │          ║ │
│  ║  │  ┌──────▼──────────┐                                  │          ║ │
│  ║  │  │ Technical (15%) │ RSI, volatility                  │          ║ │
│  ║  │  │                 │ Oversold/overbought              │          ║ │
│  ║  │  └──────┬──────────┘                                  │          ║ │
│  ║  │         │                                             │          ║ │
│  ║  │  ┌──────▼───────────┐                                 │          ║ │
│  ║  │  │ Sentiment (15%)  │ SPI alignment                   │          ║ │
│  ║  │  │                  │ Market direction                │          ║ │
│  ║  │  └──────┬───────────┘                                 │          ║ │
│  ║  │         │                                             │          ║ │
│  ║  │         ▼                                             │          ║ │
│  ║  │  ┌────────────────┐                                   │          ║ │
│  ║  │  │ Weighted Sum   │ BUY / SELL / HOLD                │          ║ │
│  ║  │  │ + Confidence   │ 0-100% confidence                │          ║ │
│  ║  │  └────────────────┘                                   │          ║ │
│  ║  │                                                        │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  PREDICTION CACHING:                                                  ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ Key: {symbol}_{date}                                   │          ║ │
│  ║  │ Reduces redundant API calls                            │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  OUTPUT: Stocks with predictions (BUY/SELL/HOLD) + confidence        ║ │
│  ║                                                                       ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                                                             │
│                                      │                                      │
│                                      ▼                                      │
│                                                                             │
│  ╔═══════════════════════════════════════════════════════════════════════╗ │
│  ║  MODULE 4: OPPORTUNITY SCORER (20KB, 600+ lines)                     ║ │
│  ╠═══════════════════════════════════════════════════════════════════════╣ │
│  ║                                                                       ║ │
│  ║  COMPOSITE SCORING (0-100):                                           ║ │
│  ║                                                                       ║ │
│  ║  BASE FACTORS:                                                        ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ Prediction Confidence (30%) ████████████████████        │          ║ │
│  ║  │   • Prediction + Confidence                            │          ║ │
│  ║  │   • BUY signals 1.2× weight                            │          ║ │
│  ║  │                                                        │          ║ │
│  ║  │ Technical Strength (20%)    ██████████████             │          ║ │
│  ║  │   • RSI optimal range                                  │          ║ │
│  ║  │   • Price vs MA position                               │          ║ │
│  ║  │   • Screening score                                    │          ║ │
│  ║  │                                                        │          ║ │
│  ║  │ SPI Alignment (15%)         ███████████                │          ║ │
│  ║  │   • Stock vs market direction                          │          ║ │
│  ║  │   • Weighted by SPI confidence                         │          ║ │
│  ║  │                                                        │          ║ │
│  ║  │ Liquidity (15%)             ███████████                │          ║ │
│  ║  │   • Trading volume                                     │          ║ │
│  ║  │   • Market capitalization                              │          ║ │
│  ║  │                                                        │          ║ │
│  ║  │ Volatility (10%)            ███████                    │          ║ │
│  ║  │   • Beta range preference                              │          ║ │
│  ║  │   • Price volatility                                   │          ║ │
│  ║  │                                                        │          ║ │
│  ║  │ Sector Momentum (10%)       ███████                    │          ║ │
│  ║  │   • Sector strength                                    │          ║ │
│  ║  │   • Relative positioning                               │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  ADJUSTMENTS:                                                         ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ PENALTIES:                BONUSES:                     │          ║ │
│  ║  │ • Low volume (-10)        • Fresh LSTM (+5)            │          ║ │
│  ║  │ • High volatility (-15)   • High win rate (+10)        │          ║ │
│  ║  │ • Contrarian (-20)        • Sector leader (+5)         │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  FILTERING:                                                           ║ │
│  ║  ┌────────────────────────────────────────────────────────┐          ║ │
│  ║  │ Threshold: ≥65 (configurable)                          │          ║ │
│  ║  │ Top N: 10 opportunities (configurable)                 │          ║ │
│  ║  │ Sort: Descending by opportunity score                  │          ║ │
│  ║  └────────────────────────────────────────────────────────┘          ║ │
│  ║                                                                       ║ │
│  ║  OUTPUT: Ranked opportunities with score breakdown                   ║ │
│  ║                                                                       ║ │
│  ╚═══════════════════════════════════════════════════════════════════════╝ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                                  OUTPUT                                     │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  📊 TOP OPPORTUNITIES (Example)                                             │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ 1. ANZ.AX - ANZ Group Holdings Limited                              │  │
│  │    Opportunity Score: 72.3/100                                      │  │
│  │    Prediction: HOLD (Confidence: 49.0%)                             │  │
│  │    Price: $37.00 | Market Cap: $110.40B | RSI: 57.8                │  │
│  │    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━│  │
│  │                                                                     │  │
│  │ 2. WBC.AX - Westpac Banking Corporation                             │  │
│  │    Opportunity Score: 62.8/100                                      │  │
│  │    Prediction: HOLD (Confidence: 49.0%)                             │  │
│  │    Price: $39.71 | Market Cap: $135.59B | RSI: 66.0                │  │
│  │    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━│  │
│  │                                                                     │  │
│  │ 3. CBA.AX - Commonwealth Bank of Australia                          │  │
│  │    Opportunity Score: 61.6/100                                      │  │
│  │    Prediction: HOLD (Confidence: 49.0%)                             │  │
│  │    Price: $178.57 | Market Cap: $298.54B | RSI: 68.4               │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  📈 SUMMARY STATISTICS                                                      │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │ Total Analyzed: 5 stocks                                            │  │
│  │ Average Opportunity Score: 61.6/100                                 │  │
│  │ High Opportunities (≥80): 0                                         │  │
│  │ Medium Opportunities (65-80): 1                                     │  │
│  │ Low Opportunities (<65): 4                                          │  │
│  │                                                                     │  │
│  │ Predictions:                                                        │  │
│  │   BUY: 0 | SELL: 0 | HOLD: 5                                       │  │
│  │   Average Confidence: 44.0%                                         │  │
│  │                                                                     │  │
│  │ Market Sentiment: 58.7/100 (BEARISH)                                │  │
│  │ Gap Prediction: -0.54%                                              │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

╔═══════════════════════════════════════════════════════════════════════════════╗
║                              SYSTEM PERFORMANCE                               ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  Stock Validation:    2-3 stocks/second (with real-time yfinance data)       ║
║  Batch Prediction:    4 parallel workers (configurable)                      ║
║  Opportunity Scoring: Real-time for 240 stocks                               ║
║  Integration Test:    <5 seconds (full workflow)                             ║
║  Memory Usage:        <100MB per worker                                      ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝

╔═══════════════════════════════════════════════════════════════════════════════╗
║                            PHASE 2 STATUS: COMPLETE ✅                        ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                               ║
║  ✅ Stock Scanner Module (16KB)                                               ║
║  ✅ SPI Monitor Module (17KB)                                                 ║
║  ✅ Batch Predictor Module (19KB)                                             ║
║  ✅ Opportunity Scorer Module (20KB)                                          ║
║  ✅ Configuration Files (6.5KB)                                               ║
║  ✅ Integration Test (5KB)                                                    ║
║  ✅ Documentation (33KB plan + 11KB summary)                                  ║
║                                                                               ║
║  Total: 9 files, 72KB code, all tests passing                                ║
║                                                                               ║
║  NEXT: Phase 3 - Report Generation & Automation                              ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
