<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Stock Market Tracker - Dashboard v9.3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        .module-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        .status-indicator {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-white mb-4">
                Global Stock Market Tracker v9.3
            </h1>
            <p class="text-xl text-blue-100">
                CRITICAL FIX APPLIED: S&P 500 now shows at 00:30-07:00 AEST (before ASX)
            </p>
            <div class="mt-4 flex justify-center gap-4">
                <span class="bg-green-500 text-white px-4 py-2 rounded-full flex items-center">
                    <span class="status-indicator w-2 h-2 bg-white rounded-full mr-2"></span>
                    System Active
                </span>
                <span class="bg-blue-500 text-white px-4 py-2 rounded-full">
                    Real-Time Data: Yahoo Finance
                </span>
                <span class="bg-purple-500 text-white px-4 py-2 rounded-full">
                    AEST Timezone Fixed
                </span>
            </div>
        </div>

        <!-- Modules Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Global Indices Tracker -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('indices')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Global Indices</h2>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">FIXED</span>
                </div>
                <p class="text-gray-600 mb-4">
                    Track global markets with corrected timing. S&P 500 properly shows before ASX opens.
                </p>
                <ul class="text-sm text-gray-500 mb-4">
                    <li>‚úÖ All Ordinaries included</li>
                    <li>‚úÖ Persistent market selection</li>
                    <li>‚úÖ 5-minute intervals</li>
                </ul>
                <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    Open Enhanced Tracker ‚Üí
                </button>
            </div>

            <!-- CBA Module -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('cba')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">CBA Analysis</h2>
                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">LIVE</span>
                </div>
                <p class="text-gray-600 mb-4">
                    Commonwealth Bank of Australia tracking with advanced analytics and predictions.
                </p>
                <ul class="text-sm text-gray-500 mb-4">
                    <li>‚Ä¢ Real-time CBA.AX data</li>
                    <li>‚Ä¢ Sentiment analysis</li>
                    <li>‚Ä¢ Price predictions</li>
                </ul>
                <button class="w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    Open CBA Tracker ‚Üí
                </button>
            </div>

            <!-- Technical Analysis -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('technical')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Technical Analysis</h2>
                    <span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">CHARTS</span>
                </div>
                <p class="text-gray-600 mb-4">
                    Advanced charting with candlesticks, indicators, and technical patterns.
                </p>
                <ul class="text-sm text-gray-500 mb-4">
                    <li>‚Ä¢ Candlestick charts</li>
                    <li>‚Ä¢ Moving averages</li>
                    <li>‚Ä¢ RSI & MACD</li>
                </ul>
                <button class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    Open Analysis ‚Üí
                </button>
            </div>

            <!-- Prediction Performance -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('prediction')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">ML Predictions</h2>
                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm">AI</span>
                </div>
                <p class="text-gray-600 mb-4">
                    Machine learning predictions with performance metrics and backtesting.
                </p>
                <ul class="text-sm text-gray-500 mb-4">
                    <li>‚Ä¢ LSTM models</li>
                    <li>‚Ä¢ Accuracy metrics</li>
                    <li>‚Ä¢ Backtesting results</li>
                </ul>
                <button class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    Open Predictions ‚Üí
                </button>
            </div>

            <!-- Document Center -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('documents')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Document Center</h2>
                    <span class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm">DOCS</span>
                </div>
                <p class="text-gray-600 mb-4">
                    Annual reports, market analysis, and financial documentation hub.
                </p>
                <ul class="text-sm text-gray-500 mb-4">
                    <li>‚Ä¢ CBA Annual Report</li>
                    <li>‚Ä¢ Market analysis</li>
                    <li>‚Ä¢ Release notes</li>
                </ul>
                <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    Open Documents ‚Üí
                </button>
            </div>

            <!-- System Status -->
            <div class="module-card rounded-lg shadow-xl p-6" onclick="launchModule('status')">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">System Status</h2>
                    <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">
                        <span class="inline-block w-2 h-2 bg-green-500 rounded-full mr-1"></span>
                        ONLINE
                    </span>
                </div>
                <p class="text-gray-600 mb-4">
                    Monitor backend services, API health, and data feed status.
                </p>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-500">Backend API</span>
                        <span class="text-green-600 font-semibold">Port 8000 ‚úì</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">Frontend</span>
                        <span class="text-green-600 font-semibold">Port 3001 ‚úì</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-500">Data Source</span>
                        <span class="text-green-600 font-semibold">Yahoo Finance ‚úì</span>
                    </div>
                </div>
                <button class="w-full mt-4 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded transition-colors">
                    View Details ‚Üí
                </button>
            </div>
        </div>

        <!-- Market Hours Info -->
        <div class="bg-white/90 backdrop-blur rounded-lg shadow-xl p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Market Trading Hours (AEST) - FIXED</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-red-50 rounded-lg p-4">
                    <h3 class="font-semibold text-red-800 mb-2">üåé Americas (Overnight)</h3>
                    <p class="text-sm text-gray-700">00:30 - 07:00 AEST</p>
                    <p class="text-xs text-gray-500 mt-1">S&P 500, Dow, NASDAQ</p>
                    <p class="text-xs text-green-600 font-semibold mt-1">‚úì Now shows BEFORE ASX</p>
                </div>
                <div class="bg-blue-50 rounded-lg p-4">
                    <h3 class="font-semibold text-blue-800 mb-2">üåè Asia-Pacific (Day)</h3>
                    <p class="text-sm text-gray-700">10:00 - 16:00 AEST</p>
                    <p class="text-xs text-gray-500 mt-1">ASX, All Ords, Nikkei</p>
                    <p class="text-xs text-green-600 font-semibold mt-1">‚úì Includes All Ordinaries</p>
                </div>
                <div class="bg-green-50 rounded-lg p-4">
                    <h3 class="font-semibold text-green-800 mb-2">üåç Europe (Evening)</h3>
                    <p class="text-sm text-gray-700">18:00 - 02:30 AEST</p>
                    <p class="text-xs text-gray-500 mt-1">FTSE, DAX, CAC 40</p>
                    <p class="text-xs text-green-600 font-semibold mt-1">‚úì Correct evening timing</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-white">
            <p class="text-sm opacity-75">
                Version 9.3 | Critical Fix Applied | Real-time data from Yahoo Finance
            </p>
        </div>
    </div>

    <script>
        function launchModule(module) {
            const modules = {
                'indices': 'indices_tracker_enhanced.html',
                'cba': 'cba_tracker.html',
                'technical': 'technical_analysis.html',
                'prediction': 'prediction_performance.html',
                'documents': 'document_center.html',
                'status': '#'  // Will implement status page
            };

            const url = modules[module];
            
            if (url === '#') {
                // Show status in alert for now
                showSystemStatus();
            } else {
                window.open(url, '_blank');
            }
        }

        function showSystemStatus() {
            const status = `
SYSTEM STATUS - GSMT v9.3
========================
‚úÖ Backend API: Running on port 8000
‚úÖ Frontend Server: Running on port 3001
‚úÖ Data Source: Yahoo Finance (Live)
‚úÖ Timezone: AEST (Fixed)
‚úÖ Cache: 2-minute TTL
‚úÖ Refresh: 30-second intervals

CRITICAL FIXES APPLIED:
- S&P 500 timing corrected (00:30-07:00)
- All Ordinaries index added
- Market selection persistence
- Module links fixed

Last check: ${new Date().toLocaleString('en-AU', {timeZone: 'Australia/Sydney'})} AEST
            `;
            alert(status);
        }

        // Check backend status on load
        async function checkBackend() {
            try {
                const response = await fetch('http://localhost:8000/');
                if (response.ok) {
                    console.log('‚úÖ Backend API is running');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Backend may not be running. Start with START_GSMT.bat');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkBackend();
            
            // Add time display
            const timeDisplay = document.createElement('div');
            timeDisplay.className = 'fixed top-4 right-4 bg-black/50 text-white px-4 py-2 rounded-lg text-sm';
            document.body.appendChild(timeDisplay);
            
            function updateTime() {
                const now = new Date();
                const aest = now.toLocaleString('en-AU', {
                    timeZone: 'Australia/Sydney',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
                timeDisplay.textContent = `AEST: ${aest}`;
            }
            
            updateTime();
            setInterval(updateTime, 1000);
        });
    </script>
</body>
</html>